angular.module("artistsService").service("artistsServiceCRUD",["$http","$rootScope",function(t,a){this.getTopArtists=function(){t.get("http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&limit=10&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){a.topArtistic=t.data.artists.artist})},this.getTopTracks=function(){t.get("http://ws.audioscrobbler.com/2.0/?method=chart.gettoptracks&limit=10&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){a.topMusic=t.data.tracks.track})},this.getListAlbuns=function(){var e,i=decodeURI(window.location.toString()).split("/"),o=i.length-1,r=0,s=[],n=[];"topalbuns"==i[o]?(r=0,t.get("http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&limit=100&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){var i=t.data.artists.artist;e=Math.ceil(i.length/10);for(var o=0;o<e-1;o++)n[o]=o+1;i.forEach(function(t,a){a>=10*r&&a<=10*r+10&&s.push(t)}),a.arrayPagenation=n,a.pageCurrent=r,a.ListAlbuns=s,a.pageResult=e,a.ListTotal=i.length})):(r=i[o],t.get("http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&limit=100&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){var i=t.data.artists.artist;e=Math.ceil(i.length/10);for(var o=0;o<e-1;o++)n[o]=o+1;i.forEach(function(t,a){a>=10*r&&a<=10*r+10&&s.push(t)}),a.arrayPagenation=n,a.pageCurrent=r,a.ListAlbuns=s,a.pageResult=e,a.ListTotal=i.length}))},this.getListMusics=function(){var e,i=decodeURI(window.location.toString()).split("/"),o=i.length-1,r=0,s=[],n=[];"topmusics"==i[o]?(r=0,t.get("http://ws.audioscrobbler.com/2.0/?method=chart.gettoptracks&limit=100&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){var i=t.data.tracks.track;e=Math.ceil(i.length/10);for(var o=0;o<e-1;o++)n[o]=o+1;i.forEach(function(t,a){a>=10*r&&a<=10*r+10&&s.push(t)}),a.arrayPagenation=n,a.pageCurrent=r,a.ListAlbuns=s,a.pageResult=e,a.ListTotal=i.length})):(r=i[o],t.get("http://ws.audioscrobbler.com/2.0/?method=chart.gettoptracks&limit=100&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){var i=t.data.tracks.track;e=Math.ceil(i.length/10);for(var o=0;o<e-1;o++)n[o]=o+1;i.forEach(function(t,a){a>=10*r&&a<=10*r+10&&s.push(t)}),a.arrayPagenation=n,a.pageCurrent=r,a.ListAlbuns=s,a.pageResult=e,a.ListTotal=i.length}))},this.getDetailArtist=function(){var e=decodeURI(window.location.toString()).split("/"),i=e[e.length-1],o=null;t.get("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+i+"&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){a.name=t.data.artist.name,a.sumario=t.data.artist.bio.summary,a.wikiText="Wiki",a.wikiLink=t.data.artist.bio.links.link.href,a.tag=t.data.artist.tags.tag[0].name,a.image=t.data.artist.image[2]["#text"],a.similar=t.data.artist.similar.artist,o="dd",a.profileHead={color:"white","background-image":"url("+t.data.artist.image[5]["#text"]+")","background-size":"auto","background-repeat":"no-repeat","background-size":"cover","background-position":"center"},a.profileHeadTag={"background-color":"rgba(0,0,0,0.5)"}}),t.get("http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&limit=10&artist="+i+"&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){a.topAlbuns=t.data.topalbums.album}),t.get("http://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&limit=10&artist="+i+"&api_key=d964618b229a40df858f3efb6957d15f&format=json").then(function(t){a.toptrack=t.data.toptracks.track})},this.getDetailAlbuns=function(){var e,i,o=decodeURI(window.location.toString()),r=o.split("/"),s=o.split("/")[r.length-2],n=o.split("/")[r.length-1];new YTPlayer("#player",[{width:"100",height:"50"}]);a.play=function(a){i=$(a.currentTarget).attr("data-video-id"),t.get("https://www.googleapis.com/youtube/v3/search?part=snippet&q="+i+"&key=AIzaSyCoLoQfQ1Y114Bjm7Z5Flq1UaafVslvKvU").then(function(t){var a="http://www.youtube.com/embed/"+(e=t.data.items[0].id.videoId);$("#ytplayer").attr("src",a),$(".containerPlayer").css("visibility","visible"),$("#myModal3").on("hidden.bs.modal",function(t){})})},t.get("http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=d964618b229a40df858f3efb6957d15f&artist="+s+"&album="+n+"&format=json").then(function(t){a.artisticName=s,a.albumName=t.data.album.name,a.albumImage=t.data.album.image[2]["#text"],a.summary=t.data.album.wiki.summary,a.tag=t.data.album.tags.tag[0].name,a.url=t.data.album.url,a.musics=t.data.album.tracks.track,a.date=t.data.album.wiki.published,a.profileHead={color:"white","background-image":"url("+t.data.album.image[5]["#text"]+")","background-size":"auto","background-repeat":"no-repeat","background-size":"cover","background-position":"center"},a.profileHeadTag={"background-color":"rgba(0,0,0,0.5)"}})}}]);